window.searchAPI=function(a,t,i){i="type"==t&&i.length>1?"["+i+"]":'"'+i+'"',queryString='{"protocol":"'+a+'","search-on":"'+t+'","search-for":'+i+',"search-like": true}';var e;if($.ajax({type:"POST",url:librarianHost+"/alexandria/v2/search",data:queryString.toString(),success:function(a){e=$.parseJSON(a).response},async:!1}),e){for(var r=0,n=0;n<e.length;n++)e[n]["oip-041"]&&(e[n]=oipDowngrade(e[n]),r++);console.log("Conformed "+r+" OIP-041 Artifacts to alexandria-media Artifacts")}return e},window.oipDowngrade=function(a){var t=a["oip-041"],i={"media-data":{"alexandria-media":{torrent:t.artifact.storage.location,publisher:t.artifact.publisher,timestamp:t.artifact.timestamp,type:t.artifact.type,info:{title:t.artifact.info.title,description:t.artifact.info.description,year:t.artifact.info.year,"extra-info":t.artifact.info.extraInfo?t.artifact.info.extraInfo:t.artifact.info["extra-info"]},payment:t.artifact.payment},signature:t.signature},txid:a.txid,block:a.block};if(i["media-data"]["alexandria-media"].info["extra-info"]["DHT Hash"]=t.artifact.storage.location,t.artifact.info.extraInfo&&t.artifact.info.extraInfo.artist&&(i["publisher-name"]=t.artifact.info.extraInfo.artist),t.artifact.info["extra-info"]&&t.artifact.info["extra-info"].artist&&(i["publisher-name"]=t.artifact.info["extra-info"].artist),t.artifact.storage.files){for(var e=t.artifact.storage.files,r=0;r<e.length;r++)e[r].filename&&!e[r].fname&&(e[r].fname=e[r].filename,delete e[r].filename),e[r].displayname&&!e[r].dname&&(e[r].dname=e[r].displayname,delete e[r].displayname);i["media-data"]["alexandria-media"].info["extra-info"].files=[],i["media-data"]["alexandria-media"].info["extra-info"].files=e}return i};